edit

* elimino bluecross e KDDI (no data PercSubsInv) + Saudi Aramco (non possiedono cultural index)
ds
*copio le variabili, tranne cvcname



destring avgagefirstinv, replace float dpcomma
destring avground, replace float dpcomma
destring avgroundfirstinv, replace float dpcomma
destring percsyndfirstinv, replace float dpcomma
destring avgcultdistcs, replace float dpcomma

destring percsubsidinv, replace float dpcomma
destring percnewind, replace float dpcomma
destring percnewcountry, replace float dpcomma
destring geoentropy, replace float dpcomma
destring indtotentropy, replace float dpcomma
destring indunrentropy, replace float dpcomma
destring indrelentropy, replace float dpcomma
destring avgivc1, replace float dpcomma
destring avgivc2, replace float dpcomma
destring avgfinint1, replace float dpcomma
destring avgfinint2, replace float dpcomma
destring avgparent1ivc, replace float dpcomma
destring avgparent2ivc, replace float dpcomma
destring avgparent2finint, replace float dpcomma

destring cultdistcp, replace float dpcomma
destring percipoma, replace float dpcomma
destring firstroundfreq, replace float dpcomma
destring medianroundfirstinv, replace float dpcomma
destring percipoma10y, replace float dpcomma
destring percfemalemanagers, replace float dpcomma

destring numberofalliances5yr, replace float dpcomma
destring XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX, replace float dpcomma
destring XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX, replace float dpcomma



global xlist XXXXXXXXXXXXXX YYYYYYYYYYYYY ZZZZZZZZZZZZZZ

* ncomp posso cambiare in numero naturalmente.
global id cvcname
global ncomp 3


describe $xlist
summarize $xlist


corr $xlist
asdoc pwcorr, label replace star(all)


pca $xlist

* Scree plot of the eigenvalues
screeplot
screeplot, yline(1)

* Principal component analysis --> change number of components
pca $xlist, mineigen(1) blanks(.3)
pca $xlist, comp($ncomp) 
pca $xlist, comp($ncomp) blanks(.3)

* in questo caso, quello venuto meglio è 
rotate, varimax
rotate, varimax blanks(.3)
rotate, clear

* in questo caso, quello venuto meglio è 
rotate, promax
rotate, promax blanks(.3)
rotate, clear	


* Scatter plots of the loadings and score variables
loadingplot
scoreplot
scoreplot, mlabel($id)

* Loadings/scores of the components
estat loadings
predict pc1 pc2 pc3 score

* KMO measure of sampling adequacy
estat kmo

