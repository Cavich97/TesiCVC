edit

* elimino bluecross e KDDI (no data PercSubsInv) + Saudi Aramco (non possiedono cultural index)
ds
*copio le variabili, tranne cvcname



destring avgagefirstinv, replace float dpcomma
destring avground, replace float dpcomma
destring avgroundfirstinv, replace float dpcomma
destring percsyndfirstinv, replace float dpcomma
destring avgcultdistcs, replace float dpcomma

destring percsubsidinv, replace float dpcomma
destring percnewind, replace float dpcomma
destring percnewcountry, replace float dpcomma
destring geoentropy, replace float dpcomma
destring indtotentropy, replace float dpcomma
destring indunrentropy, replace float dpcomma
destring indrelentropy, replace float dpcomma

destring avgivc1, replace float percent
destring avgivc2, replace float percent
destring avgfinint1, replace float percent
destring avgfinint2, replace float percent
destring avgparent1ivc, replace float percent
destring avgparent2ivc, replace float percent
destring avgparent2finint, replace float percent

destring cultdistcp, replace float dpcomma

destring percipoma, replace float percent
destring firstroundfreq, replace float percent
destring medianroundfirstinv, replace float dpcomma
destring percipoma10y, replace float percent
destring percfemalemanagers, replace float percent

replace avgalliances20y = subinstr(avgalliances20y, "-", "0",.)
replace avgalliances5y = subinstr(avgalliances5y, "-", "0",.)
replace percalliancesafterinv20y = subinstr(percalliancesafterinv20y, "-", "0",.)
replace percalliancesafterinv5y = subinstr(percalliancesafterinv5y, "-", "0",.)
replace perctechalliances20y = subinstr(perctechalliances20y, "-", "0",.)
replace perctechalliances5y = subinstr(perctechalliances5y, "-", "0",.)
replace percacquisitionsinternal20y = subinstr(percacquisitionsinternal20y, "-", "0",.)
replace percacquisitionsinternal5y = subinstr(percacquisitionsinternal5y, "-", "0",.)

destring avgalliances20y, replace float dpcomma
destring avgalliances5y, replace float dpcomma
destring percalliancesafterinv20y, replace float percent
destring percalliancesafterinv5y, replace float percent
destring perctechalliances20y, replace float percent
destring perctechalliances5y, replace float percent
destring percacquisitionsinternal20y, replace float percent
destring percacquisitionsinternal5y, replace float percent



global xlist XXXXXXXXXXXXXX YYYYYYYYYYYYY ZZZZZZZZZZZZZZ

* ncomp posso cambiare in numero naturalmente.
global id cvcname
global ncomp 3


describe $xlist
summarize $xlist


corr $xlist
asdoc pwcorr, label replace star(all)


pca $xlist

* Scree plot of the eigenvalues
screeplot
screeplot, yline(1)

* Principal component analysis --> change number of components
pca $xlist, mineigen(1) blanks(.3)
pca $xlist, comp($ncomp) 
pca $xlist, comp($ncomp) blanks(.3)

* in questo caso, quello venuto meglio è 
rotate, varimax
rotate, varimax blanks(.3)
rotate, clear

* in questo caso, quello venuto meglio è 
rotate, promax
rotate, promax blanks(.3)
rotate, clear	


* Scatter plots of the loadings and score variables
loadingplot
scoreplot
scoreplot, mlabel($id)

* Loadings/scores of the components
estat loadings
predict pc1 pc2 pc3 score

* KMO measure of sampling adequacy
estat kmo

